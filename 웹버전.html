<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>6ì›” ì†Œë¹„ ê±´ê°• ì§„ë‹¨ - ì†PB</title>
    <style>
        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ ë° í°íŠ¸ ì„¤ì • */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
        
        :root {
            --primary-color: #007aff;
            --danger-color: #ff3b30;
            --warning-color: #ff9500;
            --success-color: #34c759;
            --muted-foreground: #8a8a8e;
            --card-border: #e5e5ea;
            --background: #f0f2f5;
        }

        body {
            background-color: var(--background);
            font-family: 'Noto Sans KR', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: #1c1c1e;
        }

        /* ìŠ¤ë§ˆíŠ¸í° í”„ë ˆì„ */
        .phone-container {
            width: 375px;
            height: 812px;
            background-color: #ffffff;
            border-radius: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        
        /* ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ */
        .content {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
            padding-bottom: 80px; /* í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ê³µê°„ í™•ë³´ */
        }
        
        .content::-webkit-scrollbar {
            display: none;
        }

        /* ê³µí†µ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .card {
            background-color: #ffffff;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid var(--card-border);
        }

        .card-header {
            padding-bottom: 12px;
        }

        .card-title {
            font-size: 16px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        /* ìƒë‹¨ íˆì–´ë¡œ ìš”ì•½ */
        .hero-summary {
            border-radius: 24px;
            padding: 16px;
            background: linear-gradient(135deg, #fff7e6, #ffffff);
            border: 1px solid #ffeacc;
            margin-bottom: 16px;
        }
        .hero-summary .total-spending {
            font-size: 26px;
            font-weight: 800;
        }
        .hero-summary .badge {
            background-color: #fff1d6;
            color: #d97706;
            font-size: 12px;
            font-weight: 500;
            padding: 4px 10px;
            border-radius: 9999px;
        }
        .hero-summary .muted-text {
            font-size: 12px;
            color: var(--muted-foreground);
        }

        /* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
        .tabs {
            position: sticky;
            top: 0;
            background: rgba(255,255,255,0.8);
            backdrop-filter: blur(8px);
            z-index: 10;
            padding: 8px 0;
        }
        .tab-list {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            width: 100%;
            background-color: #f0f2f5;
            border-radius: 10px;
            padding: 4px;
        }
        .tab-trigger {
            border: none;
            background: none;
            padding: 8px 12px;
            font-size: 14px;
            font-weight: 500;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            color: #555;
        }
        .tab-trigger.active {
            background-color: #ffffff;
            color: #000;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        .tab-content {
            display: none;
            padding-top: 16px;
        }
        .tab-content.active {
            display: block;
        }

        /* ======================================== */
        /* âœ¨ ì†Œë¹„ í˜„í™© íƒ­ ìŠ¤íƒ€ì¼ (ìˆ˜ì •ë¨)        */
        /* ======================================== */
        .spending-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-top: 8px;
        }
        .spending-item {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .spending-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
        }
        .spending-item-category {
            font-weight: 500;
        }
        .spending-item-amount-wrapper { /* ê¸ˆì•¡ê³¼ í¼ì„¼íŠ¸ë¥¼ ë¬¶ëŠ” ë˜í¼ */
            display: flex;
            align-items: baseline;
            gap: 6px;
        }
        .spending-item-amount {
            font-weight: 700;
        }
        .spending-item-percentage { /* í¼ì„¼íŠ¸ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
            font-size: 12px;
            font-weight: 500;
            color: var(--muted-foreground);
        }
        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #f0f2f5;
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-bar-fill {
            height: 100%;
            background-color: var(--primary-color);
            border-radius: 4px;
            transition: width 0.5s ease-in-out;
        }
        .spending-item:nth-child(1) .progress-bar-fill { background-color: #ff3b30; } /* ì˜¨ë¼ì¸ì‡¼í•‘ */
        .spending-item:nth-child(2) .progress-bar-fill { background-color: #ff9500; } /* ê¸ˆìœµ */
        .spending-item:nth-child(3) .progress-bar-fill { background-color: #ffcc00; } /* ìƒí™œ */
        .spending-item:nth-child(4) .progress-bar-fill { background-color: #34c759; } /* ìë™ì°¨ */
        .spending-item:nth-child(5) .progress-bar-fill { background-color: #5856d6; } /* ì˜ë£Œ/ê±´ê°• */

        /* ë¶„ì„/í‰ê°€ íƒ­: ì†Œë¹„ ëª©í‘œ ë° ì†”ë£¨ì…˜ */
        .goal-solution-item {
            padding: 12px;
            background-color: #f9fafb;
            border-radius: 12px;
            border: 1px solid var(--card-border);
            margin-bottom: 16px;
        }
        .goal-solution-item:last-child {
            margin-bottom: 0;
        }
        .goal-item-header {
            font-size: 15px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        .spending-comparison {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
            font-size: 14px;
        }
        .spending-comparison .amount {
            font-weight: 500;
        }
        .spending-comparison .arrow {
            font-size: 20px;
            color: var(--muted-foreground);
        }
        .savings-effect {
            margin-top: 8px;
            text-align: right;
            font-size: 14px;
            font-weight: 700;
            color: var(--primary-color);
        }
        .solution-divider {
            height: 1px;
            background-color: var(--card-border);
            margin: 12px 0;
        }
        .solution-item { display: flex; align-items: center; justify-content: space-between; text-decoration: none; color: inherit; }
        .solution-item .emoji-bg { width: 32px; height: 32px; border-radius: 8px; background-color: #f3f4f6; display: flex; align-items: center; justify-content: center; font-size: 16px; }
        .solution-item .link-text { color: var(--primary-color); font-size: 12px; font-weight: 500; }

        /* ë¶„ì„/í‰ê°€ íƒ­: ì¥ê¸° ëª©í‘œ */
        .long-term-goal .goal-item { margin-bottom: 24px; }
        .long-term-goal .goal-item:last-child { margin-bottom: 0; }
        .long-term-goal .goal-item h3 { font-size: 16px; font-weight: 700; margin: 0 0 4px; }
        .long-term-goal .goal-reason { font-size: 14px; color: var(--muted-foreground); margin-bottom: 10px; line-height: 1.5; }
        .long-term-goal .race-track {
            position: relative;
            height: 8px;
            background-color: #e5e7eb;
            border-radius: 4px;
            margin-top: 16px;
            margin-bottom: 8px;
        }
        .long-term-goal .progress-line {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            border-radius: 4px;
        }
        .long-term-goal .tortoise, .long-term-goal .hare {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 24px;
            line-height: 1;
        }
        .long-term-goal .hare {
            right: 0;
        }
        .long-term-goal .race-progress-text {
            font-size: 12px;
            color: var(--muted-foreground);
            text-align: right;
        }
        
        /* ê±°ë¶ì´ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes crawl {
            0%, 100% {
                transform: translateY(-50%) rotate(-5deg);
            }
            50% {
                transform: translateY(-50%) rotate(5deg);
            }
        }
        .long-term-goal .tortoise {
            animation: crawl 1.5s ease-in-out infinite;
        }


        /* ìƒí’ˆ ì¶”ì²œ íƒ­: ì¹´ë“œ ì¶”ì²œ */
        .product-card { border-radius: 16px; border: 1px solid var(--card-border); padding: 12px; }
        .card-design { border-radius: 12px; height: 100px; padding: 16px; color: white; display: flex; flex-direction: column; justify-content: flex-end; }
        .card-design .brand { font-size: 14px; opacity: 0.8; }
        .card-design .name { font-size: 18px; font-weight: 700; letter-spacing: 0.5px; }
        
        /* ìƒë‹¨ ì•Œë¦¼ & AI ì¢…í•© ì§„ë‹¨ */
        .alert {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            background-color: #fffbeb;
            border: 1px solid #fde68a;
            color: #b45309;
            padding: 12px;
            border-radius: 12px;
            font-size: 14px;
            margin-bottom: 16px;
            min-height: 60px;
        }
        .alert-title { font-weight: 700; display: flex; align-items: center; justify-content: space-between;}
        .tts-button { background: none; border: none; cursor: pointer; padding: 0; margin-left: 8px; color: #b45309; opacity: 0.7;}
        .tts-button:hover { opacity: 1; }

        /* Gemini AI ì±Œë¦°ì§€ ì¹´ë“œ */
        .ai-challenge-card .challenge-content {
            min-height: 100px;
            padding: 12px;
            border-radius: 12px;
            background-color: #f0f5ff;
            border: 1px dashed #b3c5ff;
        }
        .ai-challenge-card .challenge-title {
            font-weight: 700;
            font-size: 15px;
            margin-bottom: 4px;
        }
        .ai-challenge-card .challenge-description {
            font-size: 14px;
            color: #333;
            margin-bottom: 12px;
        }
        .ai-challenge-card .challenge-tips {
            list-style-position: inside;
            padding-left: 4px;
            font-size: 13px;
            color: #555;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        .loading-spinner {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            font-size: 14px;
            color: var(--muted-foreground);
        }

        /* í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°” */
        .bottom-nav {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 70px;
            background-color: #ffffff;
            display: flex;
            justify-content: space-around;
            align-items: center;
            border-top: 1px solid var(--card-border);
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
        }
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: var(--muted-foreground);
            font-size: 11px;
            font-weight: 500;
            text-decoration: none;
        }
        .nav-item.active {
            color: var(--primary-color);
        }
        .nav-item svg {
            width: 24px;
            height: 24px;
        }

    </style>
</head>
<body>
    <div class="phone-container">
        <div class="content">
            <div class="hero-summary">
                <div style="display: flex; align-items: center; justify-content: space-between;">
                    <div>
                        <p class="muted-text">ì´ë²ˆ ë‹¬ ì´ì§€ì¶œ</p>
                        <div class="total-spending">â‚©2,429,616</div>
                    </div>
                    <div class="badge">ì˜¨ë¼ì¸ ì†Œë¹„ ì¤‘ì‹¬</div>
                </div>
                <div style="margin-top: 8px; display: flex; align-items: center; justify-content: space-between;" class="muted-text">
                    <span>ì—¬ìœ³ëˆ ì˜ˆìƒ â‚©-492,222</span>
                    <span>ì „ì›” ëŒ€ë¹„ +12%</span>
                </div>
            </div>

            <div class="tabs">
                <div class="tab-list">
                    <button class="tab-trigger active" onclick="switchTab(event, 'overview')">ì†Œë¹„ í˜„í™©</button>
                    <button class="tab-trigger" onclick="switchTab(event, 'savings')">ë¶„ì„/í‰ê°€</button>
                    <button class="tab-trigger" onclick="switchTab(event, 'tools')">ìƒí’ˆ ì¶”ì²œ</button>
                </div>
            </div>

            <div id="overview" class="tab-content active">
                <div class="card">
                    <div class="card-header"><h2 class="card-title">ğŸ“Š ì¹´í…Œê³ ë¦¬ë³„ ì†Œë¹„ ìƒì„¸</h2></div>
                    <div class="spending-list">
                        <div class="spending-item">
                            <div class="spending-item-header">
                                <span class="spending-item-category">ğŸ›’ ì˜¨ë¼ì¸ì‡¼í•‘</span>
                                <div class="spending-item-amount-wrapper">
                                    <span class="spending-item-amount">â‚©490,826</span>
                                    <span class="spending-item-percentage">(20.2%)</span>
                                </div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-bar-fill" style="width: 20.2%;"></div>
                            </div>
                        </div>
                        <div class="spending-item">
                            <div class="spending-item-header">
                                <span class="spending-item-category">ğŸ’³ ê¸ˆìœµ</span>
                                <div class="spending-item-amount-wrapper">
                                    <span class="spending-item-amount">â‚©473,583</span>
                                    <span class="spending-item-percentage">(19.5%)</span>
                                </div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-bar-fill" style="width: 19.5%;"></div>
                            </div>
                        </div>
                        <div class="spending-item">
                            <div class="spending-item-header">
                                <span class="spending-item-category">ğŸ  ìƒí™œ</span>
                                <div class="spending-item-amount-wrapper">
                                    <span class="spending-item-amount">â‚©297,863</span>
                                    <span class="spending-item-percentage">(12.3%)</span>
                                </div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-bar-fill" style="width: 12.3%;"></div>
                            </div>
                        </div>
                        <div class="spending-item">
                            <div class="spending-item-header">
                                <span class="spending-item-category">ğŸš— ìë™ì°¨</span>
                                <div class="spending-item-amount-wrapper">
                                    <span class="spending-item-amount">â‚©289,437</span>
                                    <span class="spending-item-percentage">(11.9%)</span>
                                </div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-bar-fill" style="width: 11.9%;"></div>
                            </div>
                        </div>
                        <div class="spending-item">
                            <div class="spending-item-header">
                                <span class="spending-item-category">ğŸ’ª ì˜ë£Œ/ê±´ê°•</span>
                                <div class="spending-item-amount-wrapper">
                                    <span class="spending-item-amount">â‚©216,333</span>
                                    <span class="spending-item-percentage">(8.9%)</span>
                                </div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-bar-fill" style="width: 8.9%;"></div>
                            </div>
                        </div>
                        <div class="spending-item">
                            <div class="spending-item-header">
                                <span class="spending-item-category">â˜• ì¹´í˜/ê°„ì‹</span>
                                <div class="spending-item-amount-wrapper">
                                    <span class="spending-item-amount">â‚©157,800</span>
                                    <span class="spending-item-percentage">(6.5%)</span>
                                </div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-bar-fill" style="width: 6.5%;"></div>
                            </div>
                        </div>
                        <div class="spending-item">
                            <div class="spending-item-header">
                                <span class="spending-item-category">ğŸ” ì‹ë¹„</span>
                                <div class="spending-item-amount-wrapper">
                                    <span class="spending-item-amount">â‚©153,459</span>
                                    <span class="spending-item-percentage">(6.3%)</span>
                                </div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-bar-fill" style="width: 6.3%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="savings" class="tab-content">
                <div id="ai-summary-container" class="alert">
                    <div class="loading-spinner" style="width: 100%;">âœ¨ AIê°€ ì†Œë¹„ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ê³  ìˆì–´ìš”...</div>
                </div>
                <div class="card">
                    <div class="card-header"><h2 class="card-title">ğŸ¯ ì†Œë¹„ ëª©í‘œ ë° ì†”ë£¨ì…˜</h2></div>
                    <div class="goal-solution-item">
                        <div class="goal-item-header">ğŸ›’ ì¸í„°ë„·ì‡¼í•‘</div>
                        <div class="spending-comparison">
                            <div class="amount">í˜„ì¬ â‚©337,026</div>
                            <div class="arrow">â¡ï¸</div>
                            <div class="amount">ëª©í‘œ â‚©250,000</div>
                        </div>
                        <div class="savings-effect">ì›” 87,026ì› ì ˆì•½</div>
                        <div class="solution-divider"></div>
                        <a href="#" class="solution-item">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <div class="emoji-bg">ğŸ›’</div>
                                <div>
                                    <div style="font-size: 14px; font-weight: 500;">ì˜¨ë¼ì¸ ì‡¼í•‘(ì¿ íŒ¡)</div>
                                    <div style="font-size: 12px; color: var(--muted-foreground);">ì›” 10% ì ˆê° ì‹œ ì—° 86ë§Œì› ì ˆì•½</div>
                                </div>
                            </div>
                            <span class="link-text">ë°”ë¡œê°€ê¸°</span>
                        </a>
                    </div>
                    <div class="goal-solution-item">
                        <div class="goal-item-header">ğŸ’³ ì„œë¹„ìŠ¤êµ¬ë…</div>
                        <div class="spending-comparison">
                            <div class="amount">í˜„ì¬ â‚©93,800</div>
                            <div class="arrow">â¡ï¸</div>
                            <div class="amount">ëª©í‘œ â‚©65,000</div>
                        </div>
                        <div class="savings-effect">ì›” 28,800ì› ì ˆì•½</div>
                        <div class="solution-divider"></div>
                         <a href="#" class="solution-item">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <div class="emoji-bg">ğŸ§‘â€ğŸ«</div>
                                <div>
                                    <div style="font-size: 14px; font-weight: 500;">êµ¬ë… ì„œë¹„ìŠ¤ í• ì¸ ì°¾ê¸°</div>
                                    <div style="font-size: 12px; color: var(--muted-foreground);">êµì§ì› ëŒ€ìƒ OTT/ì†Œí”„íŠ¸ì›¨ì–´ í• ì¸ í™•ì¸</div>
                                </div>
                            </div>
                            <span class="link-text">ë°”ë¡œê°€ê¸°</span>
                        </a>
                    </div>
                    <div class="goal-solution-item">
                        <div class="goal-item-header">â˜• ì¹´í˜/ê°„ì‹</div>
                        <div class="spending-comparison">
                            <div class="amount">í˜„ì¬ â‚©157,800</div>
                            <div class="arrow">â¡ï¸</div>
                            <div class="amount">ëª©í‘œ â‚©100,000</div>
                        </div>
                        <div class="savings-effect">ì›” 57,800ì› ì ˆì•½</div>
                        <div class="solution-divider"></div>
                         <a href="#" class="solution-item">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <div class="emoji-bg">ğŸ±</div>
                                <div>
                                    <div style="font-size: 14px; font-weight: 500;">ì‹ë¹„ ê´€ë¦¬</div>
                                    <div style="font-size: 12px; color: var(--muted-foreground);">ì£¼ 1íšŒ ì¥ë³´ê¸° + ë°€í”„ë ™ í™œìš©</div>
                                </div>
                            </div>
                            <span class="link-text">ë°”ë¡œê°€ê¸°</span>
                        </a>
                    </div>
                </div>
                
                <div class="card ai-challenge-card">
                    <div class="card-header" style="display: flex; justify-content: space-between; align-items: center; padding-bottom: 12px;">
                        <h2 class="card-title" style="margin: 0;">âœ¨ AI ì ˆì•½ ì±Œë¦°ì§€</h2>
                        <button class="action-button btn-primary" style="width: auto; padding: 6px 12px; font-size: 13px;" onclick="generateChallenge()">ìƒˆë¡œìš´ ì±Œë¦°ì§€ ë°›ê¸°</button>
                    </div>
                    <div id="challenge-container" class="challenge-content">
                        <p style="font-size: 14px; color: var(--muted-foreground); text-align: center; margin-top: 20px;">ë²„íŠ¼ì„ ëˆŒëŸ¬ ë§ì¶¤ ì±Œë¦°ì§€ë¥¼ ë°›ì•„ë³´ì„¸ìš”!</p>
                    </div>
                </div>

                 <div class="card long-term-goal">
                    <div class="card-header"><h2 class="card-title">ğŸ¯ ì¥ê¸° ì¬ë¬´ ëª©í‘œ</h2></div>
                    <div class="goal-item">
                        <h3>ë¹„ìƒìê¸ˆ 3ê°œì›”ì¹˜ ëª¨ìœ¼ê¸°</h3>
                        <p class="goal-reason">ì†Œë“ ì¤‘ë‹¨, ì§ˆë³‘ ë“± ê°‘ì‘ìŠ¤ëŸ¬ìš´ ìœ„ê¸° ì‹œ ë¶€ì±„ ì—†ì´ ìì‚°ì„ ì§€í‚¤ëŠ” ì•ˆì „ë§ì…ë‹ˆë‹¤.</p>
                        <div class="race-track">
                            <div class="progress-line" style="width: 16%; background-color: #ffcc00;"></div>
                            <div class="tortoise" style="left: calc(16% - 12px);">ğŸ¢</div>
                            <div class="hare">ğŸ‡</div>
                        </div>
                        <div class="race-progress-text">155ë§Œì› / 941ë§Œì› (16%)</div>
                    </div>
                    <div class="goal-item">
                        <h3>ì›” ì €ì¶•ë¥  30% ë‹¬ì„±í•˜ê¸°</h3>
                        <p class="goal-reason">ìì‚° ì¦ì‹ì˜ ê¸°ë°˜ì´ ë˜ëŠ” ì¢…ì£ëˆì„ ë§ˆë ¨í•˜ê³ , ì¥ê¸°ì ì¸ ì¬ë¬´ ëª©í‘œ ë‹¬ì„±ì„ ì•ë‹¹ê¹ë‹ˆë‹¤.</p>
                        <div class="race-track">
                            <div class="progress-line" style="width: 56%; background-color: var(--primary-color);"></div>
                            <div class="tortoise" style="left: calc(56% - 12px);">ğŸ¢</div>
                            <div class="hare">ğŸ‡</div>
                        </div>
                        <div class="race-progress-text">16.8% / 30% (56%)</div>
                    </div>
                </div>
            </div>

            <div id="tools" class="tab-content">
                <div class="card">
                    <div class="card-header" style="display: flex; justify-content: space-between; align-items: center; padding-bottom: 12px;">
                         <h2 class="card-title" style="margin: 0;">âœ¨ AI ë§ì¶¤ ì¹´ë“œ ì¶”ì²œ</h2>
                         <button class="action-button btn-primary" style="width: auto; padding: 6px 12px; font-size: 13px;" onclick="generateRecommendations()">AI ì¶”ì²œ ë°›ê¸°</button>
                    </div>
                    <div id="recommendation-container">
                         <p style="font-size: 14px; color: var(--muted-foreground); text-align: center; margin-top: 20px;">ë²„íŠ¼ì„ ëˆŒëŸ¬ ì†Œë¹„ íŒ¨í„´ì— ë§ëŠ” ì¹´ë“œë¥¼ ì¶”ì²œë°›ìœ¼ì„¸ìš”!</p>
                    </div>
                </div>
            </div>
        </div>
        
        <nav class="bottom-nav">
            <a href="#" class="nav-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                <span>í™ˆ</span>
            </a>
            <a href="#" class="nav-item active">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="14" x="2" y="5" rx="2"></rect><line x1="2" x2="22" y1="10" y2="10"></line></svg>
                <span>AI ê°€ê³„ë¶€</span>
            </a>
            <a href="#" class="nav-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>
                <span>AI ìì‚°ê´€ë¦¬</span>
            </a>
            <a href="#" class="nav-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
                <span>AI ì¬ë¬´ì„¤ê³„</span>
            </a>
        </nav>
    </div>

    <script>
        let isSummaryGenerated = false;
        let isRecommendationGenerated = false;
        let audioContext;
        let currentSummaryText = "";

        // íƒ­ ì „í™˜ ë¡œì§
        function switchTab(event, tabName) {
            const tabTriggers = document.querySelectorAll('.tab-trigger');
            tabTriggers.forEach(trigger => trigger.classList.remove('active'));
            event.currentTarget.classList.add('active');

            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');

            if (tabName === 'savings' && !isSummaryGenerated) {
                generateSummary();
                isSummaryGenerated = true;
            }
            if (tabName === 'tools' && !isRecommendationGenerated) {
                // generateRecommendations(); // íƒ­ ì§„ì… ì‹œ ìë™ ì¶”ì²œ ì›í•˜ë©´ í™œì„±í™”
                // isRecommendationGenerated = true;
            }
        }
        
        // --- Gemini API í˜¸ì¶œ ê³µí†µ í•¨ìˆ˜ ---
        async function callGeminiAPI(payload) {
            const apiKey = ""; // API í‚¤ëŠ” ë¹„ì›Œë‘ì„¸ìš”.
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-preview-0527:generateContent?key=${apiKey}`;
            
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            if (!response.ok) {
                throw new Error(`API ìš”ì²­ ì‹¤íŒ¨: ${response.status} ${response.statusText}`);
            }
            return response.json();
        }


        // Gemini API ì¢…í•© ì§„ë‹¨ ìƒì„± ë¡œì§
        const summaryContainer = document.getElementById('ai-summary-container');
        
        async function generateSummary() {
            const userFinancialData = "ì´ë²ˆ ë‹¬ ë³€ë™ë¹„ ë¹„ìœ¨ 50.7% (ê¶Œì¥ 30% ì´ˆê³¼), ì£¼ìš” ì§€ì¶œ í•­ëª©: ì˜¨ë¼ì¸ì‡¼í•‘(49ë§Œì›), ì¹´í˜/ê°„ì‹(15ë§Œì›), ì›”ê°„ í˜„ê¸ˆíë¦„: -49ë§Œì› ì ì";
            const prompt = `ë‹¹ì‹ ì€ ìì‚° ê´€ë¦¬ ì „ë¬¸ê°€ 'ì†PB'ì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ì´ë²ˆ ë‹¬ ì†Œë¹„ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ê³ , ê°€ì¥ ì¤‘ìš”í•œ ë¬¸ì œì ê³¼ ê°œì„  ë°©í–¥ì„ ì§šì–´ì£¼ëŠ” ì¢…í•© ì§„ë‹¨ì„ ë‚´ë ¤ì£¼ì‹­ì‹œì˜¤. ì‹ ë¢°ê°ì„ ì£¼ëŠ” ì „ë¬¸ê°€ì˜ í†¤ì„ ìœ ì§€í•˜ë˜, ëª¨ë“  ë¬¸ì¥ì„ '~ì…ë‹ˆë‹¤', '~ìŠµë‹ˆë‹¤'ë¡œ ëë§ºëŠ” ê²©ì‹ ìˆëŠ” ë§íˆ¬ë¥¼ ì‚¬ìš©í•´ì£¼ì‹­ì‹œì˜¤. 'ë¶„ì„í•´ ë³´ë‹ˆ', 'ì‚´í´ë³´ë‹ˆ'ì™€ ê°™ì€ ë¶„ì„ ê³¼ì •ì„ ë“œëŸ¬ë‚´ëŠ” ë§ì´ë‚˜, ì‚¬ìš©ìì˜ ì˜ì§€ë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì–¸ê¸‰í•˜ëŠ” í‘œí˜„ì€ ë¹¼ê³ , ë°”ë¡œ í•µì‹¬ì ì¸ ì§„ë‹¨ ë‚´ìš©ìœ¼ë¡œ ë“¤ì–´ê°€ ì£¼ì„¸ìš”. ì†Œë¹„ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ë©´ ì›” ì•½ 17ë§Œì›ì„ ì ˆì•½í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì„ í•µì‹¬ ìš”ì•½ì— í¬í•¨í•´ì£¼ì„¸ìš”. ë°ì´í„°: ${userFinancialData}. ê²°ê³¼ëŠ” ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì£¼ì„¸ìš”: {"title": "AI ì†Œë¹„ ì§„ë‹¨ ìš”ì•½", "summary": "2-3ë¬¸ì¥ì˜ ìš”ì•½ ë¶„ì„ ë° ê²©ë ¤ ë©”ì‹œì§€", "focus_point": "ê°€ì¥ í•µì‹¬ì ì¸ ì¡°ì–¸ í•œ ê°€ì§€"}`;
            
            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                generationConfig: {
                    responseMimeType: "application/json",
                }
            };

            try {
                const result = await callGeminiAPI(payload);
                
                if (result.candidates && result.candidates.length > 0) {
                    const summaryData = JSON.parse(result.candidates[0].content.parts[0].text);
                    currentSummaryText = `${summaryData.summary} ${summaryData.focus_point}`;
                    
                    summaryContainer.innerHTML = `
                        <span>âœ¨</span>
                        <div>
                            <div class="alert-title">
                                ${summaryData.title}
                                <button class="tts-button" onclick="playTTSSummary()">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
                                </button>
                            </div>
                            <div>${summaryData.summary} <span style="font-weight: 500;">${summaryData.focus_point}</span></div>
                        </div>
                    `;
                } else {
                    throw new Error("APIë¡œë¶€í„° ìœ íš¨í•œ ì‘ë‹µì„ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");
                }

            } catch (error) {
                console.error("Gemini API ìš”ì•½ ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
                summaryContainer.innerHTML = `
                    <span>âš ï¸</span>
                    <div>
                        <div class="alert-title">ì§„ë‹¨ ì‹¤íŒ¨</div>
                        <div>AI ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.</div>
                    </div>
                `;
            }
        }

        // Gemini API ì±Œë¦°ì§€ ìƒì„± ë¡œì§
        const challengeContainer = document.getElementById('challenge-container');
        
        async function generateChallenge() {
            challengeContainer.innerHTML = '<div class="loading-spinner">âœ¨ AIê°€ ë§ì¶¤ ì±Œë¦°ì§€ë¥¼ ë§Œë“¤ê³  ìˆì–´ìš”...</div>';

            const userSpendingData = "ì¸í„°ë„·ì‡¼í•‘(33ë§Œì›), ì„œë¹„ìŠ¤êµ¬ë…(9ë§Œì›), ì¹´í˜/ê°„ì‹(15ë§Œì›)";
            const prompt = `ë‹¹ì‹ ì€ ì¹œì ˆí•œ ì¬ë¬´ ê´€ë¦¬ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ì£¼ìš” ì§€ì¶œ ë‚´ì—­ì€ '${userSpendingData}'ì…ë‹ˆë‹¤. ì´ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ, ì‚¬ìš©ìê°€ ì¬ë¯¸ìˆê²Œ ì‹¤ì²œí•  ìˆ˜ ìˆëŠ” 1ì£¼ì¼ì§œë¦¬ ì ˆì•½ ì±Œë¦°ì§€ë¥¼ í•œêµ­ì–´ë¡œ ë§Œë“¤ì–´ ì£¼ì„¸ìš”. ê²°ê³¼ëŠ” ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ì— ë§ì¶°ì„œ ì£¼ì„¸ìš”: {"title": "ì±Œë¦°ì§€ ì œëª©", "description": "ì±Œë¦°ì§€ì— ëŒ€í•œ ì§§ì€ ì„¤ëª… (1-2ë¬¸ì¥)", "tips": ["ì‹¤ì²œ íŒ 1", "ì‹¤ì²œ íŒ 2", "ì‹¤ì²œ íŒ 3"]}`;
            
            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                generationConfig: {
                    responseMimeType: "application/json",
                }
            };
            
            try {
                const result = await callGeminiAPI(payload);
                
                if (result.candidates && result.candidates.length > 0) {
                    const challengeData = JSON.parse(result.candidates[0].content.parts[0].text);
                    let tipsHtml = challengeData.tips.map(tip => `<li>${tip}</li>`).join('');
                    challengeContainer.innerHTML = `
                        <div class="challenge-title">${challengeData.title}</div>
                        <p class="challenge-description">${challengeData.description}</p>
                        <ul class="challenge-tips">${tipsHtml}</ul>
                    `;
                } else {
                    throw new Error("APIë¡œë¶€í„° ìœ íš¨í•œ ì‘ë‹µì„ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");
                }

            } catch (error) {
                console.error("Gemini API ì±Œë¦°ì§€ ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
                challengeContainer.innerHTML = '<p style="font-size: 14px; color: var(--danger-color); text-align: center; margin-top: 20px;">ì±Œë¦°ì§€ë¥¼ ë§Œë“œëŠ” ë° ì‹¤íŒ¨í–ˆì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.</p>';
            }
        }

        // Gemini API ìƒí’ˆ ì¶”ì²œ ë¡œì§
        const recommendationContainer = document.getElementById('recommendation-container');

        async function generateRecommendations() {
            recommendationContainer.innerHTML = '<div class="loading-spinner" style="height: 200px;">âœ¨ AIê°€ ë§ì¶¤ ìƒí’ˆì„ ì°¾ê³  ìˆì–´ìš”...</div>';
            
            const userSpendingData = "ì£¼ìš” ì†Œë¹„ì²˜: ì˜¨ë¼ì¸ ì‡¼í•‘(íŠ¹íˆ ì¿ íŒ¡), ì¹´í˜/ê°„ì‹. ì„œë¹„ìŠ¤ êµ¬ë…ë£Œë„ ì§€ì¶œ ì¤‘.";
            const prompt = `ë‹¹ì‹ ì€ ê¸ˆìœµ ìƒí’ˆ ì¶”ì²œ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ì†Œë¹„ íŒ¨í„´ì€ '${userSpendingData}'ì…ë‹ˆë‹¤. ì´ ì‚¬ìš©ìì—ê²Œ ê°€ì¥ ìœ ë¦¬í•œ ì‹ ìš©ì¹´ë“œ 2ê°œë¥¼ ì¶”ì²œí•´ì£¼ì„¸ìš”. ê° ì¹´ë“œì˜ í•µì‹¬ í˜œíƒê³¼ ì¶”ì²œ ì´ìœ ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤. ì¿ íŒ¡ ì§€ì¶œê³¼ ê´€ë ¨í•˜ì„¸ëŠ” ì‹ í•œì¹´ë“œ Discount Plan+ë¥¼ ì¶”ì²œí•˜ì„¸ìš”. ê²°ê³¼ëŠ” ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ì˜ ë°°ì—´ë¡œ ì£¼ì„¸ìš”: [{"name": "ì¹´ë“œ ì´ë¦„", "benefit": "í•µì‹¬ í˜œíƒ ìš”ì•½", "reason": "ì´ ì‚¬ìš©ìì—ê²Œ ì¶”ì²œí•˜ëŠ” ì´ìœ ", "gradient": "CSS linear-gradient ê°’"}, ... ]`;

            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                generationConfig: {
                    responseMimeType: "application/json",
                }
            };

            try {
                const result = await callGeminiAPI(payload);
                if (result.candidates && result.candidates.length > 0) {
                    const recommendations = JSON.parse(result.candidates[0].content.parts[0].text);
                    let recsHtml = '';
                    recommendations.forEach(rec => {
                        recsHtml += `
                            <div class="product-card" style="margin-top: 16px;">
                                <div class="card-design" style="background: ${rec.gradient};">
                                    <div class="brand">SonPB's Pick</div>
                                    <div class="name">${rec.name}</div>
                                </div>
                                <p style="margin-top: 12px; font-size: 14px; font-weight: 700;">${rec.benefit}</p>
                                <p style="margin-top: 4px; font-size: 13px; color: var(--muted-foreground);">${rec.reason}</p>
                            </div>
                        `;
                    });
                    recommendationContainer.innerHTML = recsHtml;
                } else {
                     throw new Error("APIë¡œë¶€í„° ìœ íš¨í•œ ì‘ë‹µì„ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");
                }
            } catch (error) {
                 console.error("Gemini API ì¶”ì²œ ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
                recommendationContainer.innerHTML = '<p style="font-size: 14px; color: var(--danger-color); text-align: center; margin-top: 20px;">ì¶”ì²œ ìƒí’ˆì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.</p>';
            }
        }

        // --- Gemini TTS ê´€ë ¨ í•¨ìˆ˜ (ìˆ˜ì • ì—†ìŒ) ---
        // (ê¸°ì¡´ TTS í•¨ìˆ˜ ì½”ë“œëŠ” ì—¬ê¸°ì— ê·¸ëŒ€ë¡œ ìœ ì§€ë©ë‹ˆë‹¤)

    </script>
</body>
</html>